<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VOIDLINK // OBLIVION_STATION</title>
    <style>
        :root { --void: #050505; --beige: #E3DAC9; --green: #00FF41; --red: #FF3131; --iron: #2a2a2a; --slate: #808080; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'SF Mono', 'Fira Code', monospace; }
        body { background: var(--void); color: var(--beige); height: 100vh; overflow: hidden; display: flex; align-items: center; justify-content: center; }
        #ui-frame { width: 95vw; height: 92vh; background: rgba(227, 218, 201, 0.03); border: 1px solid rgba(227, 218, 201, 0.1); backdrop-filter: blur(25px); display: flex; flex-direction: column; padding: 25px; border-radius: 20px; position: relative; }
        .header { display: flex; justify-content: space-between; font-size: 10px; letter-spacing: 2px; border-bottom: 1px solid rgba(227, 218, 201, 0.1); padding-bottom: 15px; }
        #game-grid { display: grid; grid-template-columns: 1fr 280px; gap: 20px; flex-grow: 1; margin-top: 20px; }
        #pilot-box { border: 1px solid rgba(227, 218, 201, 0.1); position: relative; background: rgba(0,0,0,0.4); border-radius: 12px; overflow: hidden; }
        #target-zone { position: absolute; left: 0; width: 100%; height: 70px; background: rgba(0, 255, 65, 0.08); border-top: 2px solid var(--green); border-bottom: 2px solid var(--green); pointer-events: none; }
        #side-panel { display: flex; flex-direction: column; gap: 20px; }
        .panel-card { background: rgba(255,255,255,0.02); border: 1px solid rgba(227, 218, 201, 0.1); border-radius: 10px; padding: 15px; }
        #hex-display { font-size: 40px; font-weight: 900; color: #fff; text-align: center; margin: 10px 0; }
        #input-preview { font-size: 14px; color: var(--green); text-align: center; min-height: 20px; letter-spacing: 4px; }
        .leaderboard-title { font-size: 9px; opacity: 0.5; margin-bottom: 10px; text-transform: uppercase; }
        .score-row { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 4px; opacity: 0.8; }
        .best { color: var(--green); font-weight: bold; }
        #heat-meter { width: 100%; height: 4px; background: rgba(255,255,255,0.05); margin-top: 15px; }
        #heat-bar { height: 100%; width: 0%; background: var(--red); transition: 0.2s; }
        #overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--void); z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; border-radius: 20px; }
        input#player-input { background: transparent; border: 1px solid rgba(227, 218, 201, 0.2); color: var(--beige); padding: 12px; text-align: center; text-transform: uppercase; margin-top: 20px; outline: none; width: 220px; font-size: 10px; letter-spacing: 2px; }
        .btn { padding: 15px 35px; border: 1px solid var(--beige); background: none; color: var(--beige); cursor: pointer; text-transform: uppercase; font-size: 11px; margin: 10px; transition: 0.3s; letter-spacing: 2px; }
        .btn:hover { background: var(--beige); color: var(--void); }
        .btn-insta { border-color: var(--slate); color: var(--slate); }
        .btn-x { border-color: #fff; color: #fff; }
        .warning { animation: pulse 0.3s infinite; }
        @keyframes pulse { 0% { background: transparent; } 50% { background: rgba(255, 49, 49, 0.1); } 100% { background: transparent; } }
    </style>
</head>
<body>

    <div id="ui-frame">
        <div id="overlay">
            <h1 style="letter-spacing: 15px; font-weight: 900; font-size: 40px;">V O I D L I N K</h1>
            <p style="opacity: 0.5; font-size: 9px; margin-top: 10px; letter-spacing: 3px;">OBLIVION_STATION // CO-OP PROTOCOL</p>
            <div id="session-stats" style="margin: 30px 0; display: none;">
                <p id="last-uptime" style="font-size: 48px; color: var(--red); font-weight: bold;"></p>
                <p id="total-attempts" style="font-size: 9px; opacity: 0.5; margin-top: 5px; letter-spacing: 1px;"></p>
            </div>
            <input type="text" id="player-input" placeholder="IDENTIFY PLAYER" maxlength="12">
            <div style="display: flex; flex-wrap: wrap; justify-content: center; margin-top: 10px;">
                <button class="btn" onclick="start()">START SESSION</button>
                <button id="share-insta" class="btn btn-insta" style="display: none;" onclick="genInstaCard()">GENERATE CARD</button>
                <button id="share-x" class="btn btn-x" style="display: none;" onclick="shareOnX()">SHARE ON X</button>
            </div>
            <p style="font-size: 9px; color: var(--green); margin-top: 40px; opacity: 0.6; letter-spacing: 2px;">DESIGNED FOR THE FUTURE @VoidLink</p>
        </div>

        <div class="header">
            <div>PILOT: <span id="pilot-name-ui">---</span></div>
            <div>ATTEMPTS: <span id="attempt-ui">0</span></div>
            <div>UPTIME: <span id="time-ui">0.0</span>s</div>
        </div>

        <div id="game-grid">
            <div id="pilot-box"><div id="target-zone"></div><canvas id="waveCanvas"></canvas></div>
            <div id="side-panel">
                <div class="panel-card">
                    <div class="leaderboard-title">DECODER INPUT</div>
                    <div id="hex-display">----</div>
                    <div id="input-preview"></div>
                    <div id="heat-meter"><div id="heat-bar"></div></div>
                </div>
                <div class="panel-card" style="flex-grow: 1;">
                    <div class="leaderboard-title">TOP PERFORMANCE</div>
                    <div id="leaderboard-list"></div>
                </div>
            </div>
        </div>
    </div>

    <canvas id="instaCanvas" width="1080" height="1920" style="display:none;"></canvas>

    <script>
        console.log("%cVOIDLINK SYSTEM v3.1\n%cPROPRIETARY CODE - AUTHORIZED ACCESS ONLY", "color:#00FF41; font-size:20px; font-weight:bold;", "color:#808080;");

        const canvas = document.getElementById('waveCanvas');
        const ctx = canvas.getContext('2d');
        const zone = document.getElementById('target-zone');
        let running = false, time = 0, heat = 0, mouseY = 150, waveY = 150;
        let hex = "", input = "", playerName = "GUEST_USER";
        let attempts = parseInt(localStorage.getItem('void_attempts') || '0');
        let scores = JSON.parse(localStorage.getItem('void_scores_v2') || '[]');

        function updateUI() {
            document.getElementById('attempt-ui').innerText = attempts;
            document.getElementById('pilot-name-ui').innerText = playerName.toUpperCase();
            document.getElementById('leaderboard-list').innerHTML = scores.map((s, i) => `<div class="score-row ${i===0?'best':''}"><span>RANK_0${i+1}</span><span>${s}s</span></div>`).join('');
        }

        function genHex() {
            hex = Math.random().toString(16).toUpperCase().substring(2, 6);
            document.getElementById('hex-display').innerText = hex;
            input = ""; document.getElementById('input-preview').innerText = "";
        }

        const handleInput = (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseY = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
        };

        window.addEventListener('mousemove', handleInput);
        window.addEventListener('touchmove', (e) => { e.preventDefault(); handleInput(e); }, {passive: false});
        window.addEventListener('keydown', (e) => {
            if(!running) return;
            const key = e.key.toUpperCase();
            if("0123456789ABCDEF".includes(key)) {
                input += key;
                document.getElementById('input-preview').innerText = input;
                if(input === hex) { heat = Math.max(0, heat - 30); genHex(); }
                else if(!hex.startsWith(input)) input = "";
            }
        });

        function start() {
            playerName = document.getElementById('player-input').value || "GUEST_USER";
            canvas.width = document.getElementById('pilot-box').clientWidth;
            canvas.height = document.getElementById('pilot-box').clientHeight;
            running = true; time = 0; heat = 0; attempts++;
            localStorage.setItem('void_attempts', attempts);
            document.getElementById('overlay').style.display = 'none';
            genHex(); updateUI(); loop();
        }

        function loop() {
            if(!running) return;
            time += 0.016; heat += (time < 15) ? 0.08 : 0.12;
            let targetY = (canvas.height/2 - 35) + Math.sin(time * 1.5) * ((time < 12) ? 50 : 100);
            zone.style.top = targetY + "px";
            waveY += (mouseY - waveY) * 0.15;
            if(Math.abs(waveY - (targetY + 35)) > 40) {
                heat += 0.5; document.getElementById('ui-frame').classList.add('warning');
            } else { document.getElementById('ui-frame').classList.remove('warning'); }
            document.getElementById('time-ui').innerText = time.toFixed(1);
            document.getElementById('heat-bar').style.width = heat + "%";
            if(heat >= 100 || waveY < 0 || waveY > canvas.height) endGame();
            else { draw(); requestAnimationFrame(loop); }
        }

        function draw() {
            ctx.clearRect(0,0, canvas.width, canvas.height);
            ctx.beginPath(); ctx.strokeStyle = "#E3DAC9"; ctx.lineWidth = 2;
            for(let x=0; x<canvas.width; x+=10) {
                const y = waveY + Math.sin(x*0.02 + time*4) * 12;
                x===0 ? ctx.moveTo(x,y) : ctx.lineTo(x,y);
            }
            ctx.stroke();
        }

        function endGame() {
            running = false;
            const final = time.toFixed(1);
            scores.push(final); scores.sort((a,b) => b-a); scores = scores.slice(0, 5);
            localStorage.setItem('void_scores_v2', JSON.stringify(scores));
            document.getElementById('overlay').style.display = 'flex';
            document.getElementById('session-stats').style.display = 'block';
            document.getElementById('last-uptime').innerText = final + "s";
            document.getElementById('total-attempts').innerText = "TOTAL SESSIONS: " + attempts;
            document.getElementById('share-insta').style.display = 'inline-block';
            document.getElementById('share-x').style.display = 'inline-block';
            updateUI();
        }

        function shareOnX() {
            const text = encodeURIComponent(`[PROTOCOL_STABILIZED]\n\nPilot: ${playerName.toUpperCase()}\nUptime: ${time.toFixed(1)}s\n\nChallenge the void at @VoidLink\n#VoidLink #OblivionStation #Web3Game`);
            window.open(`https://twitter.com/intent/tweet?text=${text}`, '_blank');
        }

        function genInstaCard() {
            const iCanvas = document.getElementById('instaCanvas');
            const iCtx = iCanvas.getContext('2d');
            const grad = iCtx.createRadialGradient(540, 960, 100, 540, 960, 1200);
            grad.addColorStop(0, '#1a1a1a'); grad.addColorStop(1, '#050505');
            iCtx.fillStyle = grad; iCtx.fillRect(0, 0, 1080, 1920);
            iCtx.strokeStyle = 'rgba(227, 218, 201, 0.03)';
            for(let i=0; i<1080; i+=60) {
                iCtx.beginPath(); iCtx.moveTo(i, 0);
                iCtx.bezierCurveTo(i+50, 600, i-50, 1200, i, 1920); iCtx.stroke();
            }
            iCtx.strokeStyle = '#808080'; iCtx.lineWidth = 2;
            iCtx.strokeRect(50, 50, 980, 1820);
            iCtx.fillStyle = '#00FF41';
            iCtx.fillRect(40, 40, 40, 5); iCtx.fillRect(40, 40, 5, 40);
            iCtx.fillRect(1000, 1875, 40, 5); iCtx.fillRect(1035, 1840, 5, 40);
            iCtx.fillStyle = '#E3DAC9'; iCtx.font = 'bold 90px Arial'; iCtx.fillText('VOIDLINK', 100, 200);
            iCtx.fillStyle = '#00FF41'; iCtx.font = '22px Courier New'; iCtx.fillText('STABILITY TEST // OBLIVION PROTOCOL // 2026', 100, 250);
            iCtx.fillStyle = 'rgba(255, 255, 255, 0.02)'; iCtx.fillRect(100, 380, 880, 550);
            iCtx.strokeStyle = 'rgba(227, 218, 201, 0.1)'; iCtx.strokeRect(100, 380, 880, 550);
            iCtx.fillStyle = '#808080'; iCtx.font = 'bold 35px Arial'; iCtx.fillText('CORE_UPTIME', 150, 470);
            iCtx.fillStyle = '#FFF'; iCtx.font = '900 280px Arial';
            const sText = time.toFixed(1); iCtx.fillText(sText, 150, 780);
            iCtx.font = '100px Arial'; iCtx.fillText('          s', 180 + iCtx.measureText(sText).width, 780);
            const drawData = (l, v, y) => {
                iCtx.fillStyle = 'rgba(227, 218, 201, 0.5)'; iCtx.font = '20px Courier New'; iCtx.fillText(l, 100, y);
                iCtx.fillStyle = '#E3DAC9'; iCtx.font = 'bold 50px Arial'; iCtx.fillText(v, 100, y + 60);
            };
            drawData('PLAYER_NAME', playerName.toUpperCase(), 1050);
            drawData('TOTAL_ATTEMPTS', attempts.toString().padStart(3, '0'), 1250);
            drawData('PERSONAL_BEST', scores[0] + 's', 1450);
            iCtx.strokeStyle = 'rgba(128, 128, 128, 0.5)';
            iCtx.beginPath(); iCtx.arc(850, 1300, 150, 0, Math.PI*2); iCtx.stroke();
            iCtx.beginPath(); iCtx.arc(850, 1300, 80, 0, Math.PI*2); iCtx.stroke();
            iCtx.moveTo(850, 1100); iCtx.lineTo(850, 1500); iCtx.moveTo(650, 1300); iCtx.lineTo(1050, 1300); iCtx.stroke();
            iCtx.fillStyle = '#00FF41'; iCtx.font = 'bold 60px Arial'; iCtx.fillText('@VOIDLINK', 100, 1750);
            iCtx.fillStyle = 'rgba(227, 218, 201, 0.3)'; iCtx.font = '18px Courier New'; iCtx.fillText('ENCRYPTED DATA // AUTHORIZED REPRODUCTION ONLY', 100, 1800);
            const link = document.createElement('a');
            link.download = `VoidLink_${playerName}.png`;
            link.href = iCanvas.toDataURL('image/png'); link.click();
        }
        updateUI();
    </script>
</body>
</html>